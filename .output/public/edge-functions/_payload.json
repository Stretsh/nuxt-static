[{"data":1,"prerenderedAt":895},["Reactive",2],{"content-query-nEJYbPYpqd":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":5,"title":7,"description":8,"body":9,"_type":890,"_id":891,"_source":892,"_file":893,"_extension":894},"/edge-functions","",false,"Edge Functions","Edge Functions allow you to deliver content to your site's visitors with speed and personalization. They are deployed globally on Vercel's Edge Network and enable you to move server-side logic to the Edge, close to your visitors.",{"type":10,"children":11,"toc":888},"root",[12,20,34,46,564,574,882],{"type":13,"tag":14,"props":15,"children":17},"element","h1",{"id":16},"edge-functions",[18],{"type":19,"value":7},"text",{"type":13,"tag":21,"props":22,"children":23},"p",{},[24,32],{"type":13,"tag":25,"props":26,"children":30},"a",{"href":27,"rel":28},"http://vercel.com/edge",[29],"nofollow",[31],{"type":19,"value":7},{"type":19,"value":33}," allow you to deliver content to your site's visitors with speed and personalization. They are deployed globally on Vercel's Edge Network and enable you to move server-side logic to the Edge, close to your visitors.",{"type":13,"tag":35,"props":36,"children":38},"h4",{"id":37},"pagesindexvue",[39],{"type":13,"tag":40,"props":41,"children":43},"code",{"className":42},[],[44],{"type":19,"value":45},"/pages/index.vue",{"type":13,"tag":47,"props":48,"children":52},"pre",{"className":49,"code":50,"language":51,"meta":5,"style":5},"language-vue shiki shiki-themes monokai","\u003Cscript setup>\nconst { data: info } = await useAsyncData(() =>\n  globalThis.$fetch('/api/info', {\n    headers: useRequestHeaders(['x-forwarded-for', 'x-vercel-ip-city']),\n  })\n);\nconst generatedAt = useState(() => new Date().toISOString());\n\u003C/script>\n\n\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>Hello from the Edge!\u003C/div>\n    \u003Cdiv>\n      Your City: \u003Cspan>{{ info.city }}\u003C/span>\n    \u003C/div>\n    \u003Cdiv>\n      Your IP address: \u003Cspan>{{ info.ip }}\u003C/span>\n    \u003C/div>\n    \u003Cdiv>\n      Generated at: \u003Cspan>{{ generatedAt }}\u003C/span>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n","vue",[53],{"type":13,"tag":40,"props":54,"children":55},{"__ignoreMap":5},[56,85,125,155,194,203,212,268,285,295,312,330,356,372,398,415,431,457,473,489,515,531,548],{"type":13,"tag":57,"props":58,"children":61},"span",{"class":59,"line":60},"line",1,[62,68,74,80],{"type":13,"tag":57,"props":63,"children":65},{"style":64},"--shiki-default:#F8F8F2",[66],{"type":19,"value":67},"\u003C",{"type":13,"tag":57,"props":69,"children":71},{"style":70},"--shiki-default:#F92672",[72],{"type":19,"value":73},"script",{"type":13,"tag":57,"props":75,"children":77},{"style":76},"--shiki-default:#A6E22E",[78],{"type":19,"value":79}," setup",{"type":13,"tag":57,"props":81,"children":82},{"style":64},[83],{"type":19,"value":84},">\n",{"type":13,"tag":57,"props":86,"children":88},{"class":59,"line":87},2,[89,95,100,105,110,115,120],{"type":13,"tag":57,"props":90,"children":92},{"style":91},"--shiki-default:#66D9EF;--shiki-default-font-style:italic",[93],{"type":19,"value":94},"const",{"type":13,"tag":57,"props":96,"children":97},{"style":64},[98],{"type":19,"value":99}," { data: info } ",{"type":13,"tag":57,"props":101,"children":102},{"style":70},[103],{"type":19,"value":104},"=",{"type":13,"tag":57,"props":106,"children":107},{"style":70},[108],{"type":19,"value":109}," await",{"type":13,"tag":57,"props":111,"children":112},{"style":76},[113],{"type":19,"value":114}," useAsyncData",{"type":13,"tag":57,"props":116,"children":117},{"style":64},[118],{"type":19,"value":119},"(() ",{"type":13,"tag":57,"props":121,"children":122},{"style":91},[123],{"type":19,"value":124},"=>\n",{"type":13,"tag":57,"props":126,"children":128},{"class":59,"line":127},3,[129,134,139,144,150],{"type":13,"tag":57,"props":130,"children":131},{"style":64},[132],{"type":19,"value":133},"  globalThis.",{"type":13,"tag":57,"props":135,"children":136},{"style":76},[137],{"type":19,"value":138},"$fetch",{"type":13,"tag":57,"props":140,"children":141},{"style":64},[142],{"type":19,"value":143},"(",{"type":13,"tag":57,"props":145,"children":147},{"style":146},"--shiki-default:#E6DB74",[148],{"type":19,"value":149},"'/api/info'",{"type":13,"tag":57,"props":151,"children":152},{"style":64},[153],{"type":19,"value":154},", {\n",{"type":13,"tag":57,"props":156,"children":158},{"class":59,"line":157},4,[159,164,169,174,179,184,189],{"type":13,"tag":57,"props":160,"children":161},{"style":64},[162],{"type":19,"value":163},"    headers: ",{"type":13,"tag":57,"props":165,"children":166},{"style":76},[167],{"type":19,"value":168},"useRequestHeaders",{"type":13,"tag":57,"props":170,"children":171},{"style":64},[172],{"type":19,"value":173},"([",{"type":13,"tag":57,"props":175,"children":176},{"style":146},[177],{"type":19,"value":178},"'x-forwarded-for'",{"type":13,"tag":57,"props":180,"children":181},{"style":64},[182],{"type":19,"value":183},", ",{"type":13,"tag":57,"props":185,"children":186},{"style":146},[187],{"type":19,"value":188},"'x-vercel-ip-city'",{"type":13,"tag":57,"props":190,"children":191},{"style":64},[192],{"type":19,"value":193},"]),\n",{"type":13,"tag":57,"props":195,"children":197},{"class":59,"line":196},5,[198],{"type":13,"tag":57,"props":199,"children":200},{"style":64},[201],{"type":19,"value":202},"  })\n",{"type":13,"tag":57,"props":204,"children":206},{"class":59,"line":205},6,[207],{"type":13,"tag":57,"props":208,"children":209},{"style":64},[210],{"type":19,"value":211},");\n",{"type":13,"tag":57,"props":213,"children":215},{"class":59,"line":214},7,[216,220,225,229,234,238,243,248,253,258,263],{"type":13,"tag":57,"props":217,"children":218},{"style":91},[219],{"type":19,"value":94},{"type":13,"tag":57,"props":221,"children":222},{"style":64},[223],{"type":19,"value":224}," generatedAt ",{"type":13,"tag":57,"props":226,"children":227},{"style":70},[228],{"type":19,"value":104},{"type":13,"tag":57,"props":230,"children":231},{"style":76},[232],{"type":19,"value":233}," useState",{"type":13,"tag":57,"props":235,"children":236},{"style":64},[237],{"type":19,"value":119},{"type":13,"tag":57,"props":239,"children":240},{"style":91},[241],{"type":19,"value":242},"=>",{"type":13,"tag":57,"props":244,"children":245},{"style":70},[246],{"type":19,"value":247}," new",{"type":13,"tag":57,"props":249,"children":250},{"style":76},[251],{"type":19,"value":252}," Date",{"type":13,"tag":57,"props":254,"children":255},{"style":64},[256],{"type":19,"value":257},"().",{"type":13,"tag":57,"props":259,"children":260},{"style":76},[261],{"type":19,"value":262},"toISOString",{"type":13,"tag":57,"props":264,"children":265},{"style":64},[266],{"type":19,"value":267},"());\n",{"type":13,"tag":57,"props":269,"children":271},{"class":59,"line":270},8,[272,277,281],{"type":13,"tag":57,"props":273,"children":274},{"style":64},[275],{"type":19,"value":276},"\u003C/",{"type":13,"tag":57,"props":278,"children":279},{"style":70},[280],{"type":19,"value":73},{"type":13,"tag":57,"props":282,"children":283},{"style":64},[284],{"type":19,"value":84},{"type":13,"tag":57,"props":286,"children":288},{"class":59,"line":287},9,[289],{"type":13,"tag":57,"props":290,"children":292},{"emptyLinePlaceholder":291},true,[293],{"type":19,"value":294},"\n",{"type":13,"tag":57,"props":296,"children":298},{"class":59,"line":297},10,[299,303,308],{"type":13,"tag":57,"props":300,"children":301},{"style":64},[302],{"type":19,"value":67},{"type":13,"tag":57,"props":304,"children":305},{"style":70},[306],{"type":19,"value":307},"template",{"type":13,"tag":57,"props":309,"children":310},{"style":64},[311],{"type":19,"value":84},{"type":13,"tag":57,"props":313,"children":315},{"class":59,"line":314},11,[316,321,326],{"type":13,"tag":57,"props":317,"children":318},{"style":64},[319],{"type":19,"value":320},"  \u003C",{"type":13,"tag":57,"props":322,"children":323},{"style":70},[324],{"type":19,"value":325},"div",{"type":13,"tag":57,"props":327,"children":328},{"style":64},[329],{"type":19,"value":84},{"type":13,"tag":57,"props":331,"children":333},{"class":59,"line":332},12,[334,339,343,348,352],{"type":13,"tag":57,"props":335,"children":336},{"style":64},[337],{"type":19,"value":338},"    \u003C",{"type":13,"tag":57,"props":340,"children":341},{"style":70},[342],{"type":19,"value":325},{"type":13,"tag":57,"props":344,"children":345},{"style":64},[346],{"type":19,"value":347},">Hello from the Edge!\u003C/",{"type":13,"tag":57,"props":349,"children":350},{"style":70},[351],{"type":19,"value":325},{"type":13,"tag":57,"props":353,"children":354},{"style":64},[355],{"type":19,"value":84},{"type":13,"tag":57,"props":357,"children":359},{"class":59,"line":358},13,[360,364,368],{"type":13,"tag":57,"props":361,"children":362},{"style":64},[363],{"type":19,"value":338},{"type":13,"tag":57,"props":365,"children":366},{"style":70},[367],{"type":19,"value":325},{"type":13,"tag":57,"props":369,"children":370},{"style":64},[371],{"type":19,"value":84},{"type":13,"tag":57,"props":373,"children":375},{"class":59,"line":374},14,[376,381,385,390,394],{"type":13,"tag":57,"props":377,"children":378},{"style":64},[379],{"type":19,"value":380},"      Your City: \u003C",{"type":13,"tag":57,"props":382,"children":383},{"style":70},[384],{"type":19,"value":57},{"type":13,"tag":57,"props":386,"children":387},{"style":64},[388],{"type":19,"value":389},">{{ info.city }}\u003C/",{"type":13,"tag":57,"props":391,"children":392},{"style":70},[393],{"type":19,"value":57},{"type":13,"tag":57,"props":395,"children":396},{"style":64},[397],{"type":19,"value":84},{"type":13,"tag":57,"props":399,"children":401},{"class":59,"line":400},15,[402,407,411],{"type":13,"tag":57,"props":403,"children":404},{"style":64},[405],{"type":19,"value":406},"    \u003C/",{"type":13,"tag":57,"props":408,"children":409},{"style":70},[410],{"type":19,"value":325},{"type":13,"tag":57,"props":412,"children":413},{"style":64},[414],{"type":19,"value":84},{"type":13,"tag":57,"props":416,"children":418},{"class":59,"line":417},16,[419,423,427],{"type":13,"tag":57,"props":420,"children":421},{"style":64},[422],{"type":19,"value":338},{"type":13,"tag":57,"props":424,"children":425},{"style":70},[426],{"type":19,"value":325},{"type":13,"tag":57,"props":428,"children":429},{"style":64},[430],{"type":19,"value":84},{"type":13,"tag":57,"props":432,"children":434},{"class":59,"line":433},17,[435,440,444,449,453],{"type":13,"tag":57,"props":436,"children":437},{"style":64},[438],{"type":19,"value":439},"      Your IP address: \u003C",{"type":13,"tag":57,"props":441,"children":442},{"style":70},[443],{"type":19,"value":57},{"type":13,"tag":57,"props":445,"children":446},{"style":64},[447],{"type":19,"value":448},">{{ info.ip }}\u003C/",{"type":13,"tag":57,"props":450,"children":451},{"style":70},[452],{"type":19,"value":57},{"type":13,"tag":57,"props":454,"children":455},{"style":64},[456],{"type":19,"value":84},{"type":13,"tag":57,"props":458,"children":460},{"class":59,"line":459},18,[461,465,469],{"type":13,"tag":57,"props":462,"children":463},{"style":64},[464],{"type":19,"value":406},{"type":13,"tag":57,"props":466,"children":467},{"style":70},[468],{"type":19,"value":325},{"type":13,"tag":57,"props":470,"children":471},{"style":64},[472],{"type":19,"value":84},{"type":13,"tag":57,"props":474,"children":476},{"class":59,"line":475},19,[477,481,485],{"type":13,"tag":57,"props":478,"children":479},{"style":64},[480],{"type":19,"value":338},{"type":13,"tag":57,"props":482,"children":483},{"style":70},[484],{"type":19,"value":325},{"type":13,"tag":57,"props":486,"children":487},{"style":64},[488],{"type":19,"value":84},{"type":13,"tag":57,"props":490,"children":492},{"class":59,"line":491},20,[493,498,502,507,511],{"type":13,"tag":57,"props":494,"children":495},{"style":64},[496],{"type":19,"value":497},"      Generated at: \u003C",{"type":13,"tag":57,"props":499,"children":500},{"style":70},[501],{"type":19,"value":57},{"type":13,"tag":57,"props":503,"children":504},{"style":64},[505],{"type":19,"value":506},">{{ generatedAt }}\u003C/",{"type":13,"tag":57,"props":508,"children":509},{"style":70},[510],{"type":19,"value":57},{"type":13,"tag":57,"props":512,"children":513},{"style":64},[514],{"type":19,"value":84},{"type":13,"tag":57,"props":516,"children":518},{"class":59,"line":517},21,[519,523,527],{"type":13,"tag":57,"props":520,"children":521},{"style":64},[522],{"type":19,"value":406},{"type":13,"tag":57,"props":524,"children":525},{"style":70},[526],{"type":19,"value":325},{"type":13,"tag":57,"props":528,"children":529},{"style":64},[530],{"type":19,"value":84},{"type":13,"tag":57,"props":532,"children":534},{"class":59,"line":533},22,[535,540,544],{"type":13,"tag":57,"props":536,"children":537},{"style":64},[538],{"type":19,"value":539},"  \u003C/",{"type":13,"tag":57,"props":541,"children":542},{"style":70},[543],{"type":19,"value":325},{"type":13,"tag":57,"props":545,"children":546},{"style":64},[547],{"type":19,"value":84},{"type":13,"tag":57,"props":549,"children":551},{"class":59,"line":550},23,[552,556,560],{"type":13,"tag":57,"props":553,"children":554},{"style":64},[555],{"type":19,"value":276},{"type":13,"tag":57,"props":557,"children":558},{"style":70},[559],{"type":19,"value":307},{"type":13,"tag":57,"props":561,"children":562},{"style":64},[563],{"type":19,"value":84},{"type":13,"tag":35,"props":565,"children":567},{"id":566},"serverapiinfots",[568],{"type":13,"tag":40,"props":569,"children":571},{"className":570},[],[572],{"type":19,"value":573},"/server/api/info.ts",{"type":13,"tag":47,"props":575,"children":579},{"className":576,"code":577,"language":578,"meta":5,"style":5},"language-ts shiki shiki-themes monokai","export default eventHandler((event) => {\n  const cityHeader = event.req.headers['x-vercel-ip-city'] as string;\n  const city = cityHeader ? decodeURIComponent(cityHeader) : '-';\n  const ipHeader = event.req.headers['x-forwarded-for'] as string;\n  const ip = ipHeader ? ipHeader.split(',')[0] : '-';\n\n  return {\n    city,\n    ip,\n  };\n});\n","ts",[580],{"type":13,"tag":40,"props":581,"children":582},{"__ignoreMap":5},[583,626,672,721,761,831,838,850,858,866,874],{"type":13,"tag":57,"props":584,"children":585},{"class":59,"line":60},[586,591,596,601,606,612,617,621],{"type":13,"tag":57,"props":587,"children":588},{"style":70},[589],{"type":19,"value":590},"export",{"type":13,"tag":57,"props":592,"children":593},{"style":70},[594],{"type":19,"value":595}," default",{"type":13,"tag":57,"props":597,"children":598},{"style":76},[599],{"type":19,"value":600}," eventHandler",{"type":13,"tag":57,"props":602,"children":603},{"style":64},[604],{"type":19,"value":605},"((",{"type":13,"tag":57,"props":607,"children":609},{"style":608},"--shiki-default:#FD971F;--shiki-default-font-style:italic",[610],{"type":19,"value":611},"event",{"type":13,"tag":57,"props":613,"children":614},{"style":64},[615],{"type":19,"value":616},") ",{"type":13,"tag":57,"props":618,"children":619},{"style":91},[620],{"type":19,"value":242},{"type":13,"tag":57,"props":622,"children":623},{"style":64},[624],{"type":19,"value":625}," {\n",{"type":13,"tag":57,"props":627,"children":628},{"class":59,"line":87},[629,634,639,643,648,652,657,662,667],{"type":13,"tag":57,"props":630,"children":631},{"style":91},[632],{"type":19,"value":633},"  const",{"type":13,"tag":57,"props":635,"children":636},{"style":64},[637],{"type":19,"value":638}," cityHeader ",{"type":13,"tag":57,"props":640,"children":641},{"style":70},[642],{"type":19,"value":104},{"type":13,"tag":57,"props":644,"children":645},{"style":64},[646],{"type":19,"value":647}," event.req.headers[",{"type":13,"tag":57,"props":649,"children":650},{"style":146},[651],{"type":19,"value":188},{"type":13,"tag":57,"props":653,"children":654},{"style":64},[655],{"type":19,"value":656},"] ",{"type":13,"tag":57,"props":658,"children":659},{"style":70},[660],{"type":19,"value":661},"as",{"type":13,"tag":57,"props":663,"children":664},{"style":91},[665],{"type":19,"value":666}," string",{"type":13,"tag":57,"props":668,"children":669},{"style":64},[670],{"type":19,"value":671},";\n",{"type":13,"tag":57,"props":673,"children":674},{"class":59,"line":127},[675,679,684,688,692,697,702,707,712,717],{"type":13,"tag":57,"props":676,"children":677},{"style":91},[678],{"type":19,"value":633},{"type":13,"tag":57,"props":680,"children":681},{"style":64},[682],{"type":19,"value":683}," city ",{"type":13,"tag":57,"props":685,"children":686},{"style":70},[687],{"type":19,"value":104},{"type":13,"tag":57,"props":689,"children":690},{"style":64},[691],{"type":19,"value":638},{"type":13,"tag":57,"props":693,"children":694},{"style":70},[695],{"type":19,"value":696},"?",{"type":13,"tag":57,"props":698,"children":699},{"style":76},[700],{"type":19,"value":701}," decodeURIComponent",{"type":13,"tag":57,"props":703,"children":704},{"style":64},[705],{"type":19,"value":706},"(cityHeader) ",{"type":13,"tag":57,"props":708,"children":709},{"style":70},[710],{"type":19,"value":711},":",{"type":13,"tag":57,"props":713,"children":714},{"style":146},[715],{"type":19,"value":716}," '-'",{"type":13,"tag":57,"props":718,"children":719},{"style":64},[720],{"type":19,"value":671},{"type":13,"tag":57,"props":722,"children":723},{"class":59,"line":157},[724,728,733,737,741,745,749,753,757],{"type":13,"tag":57,"props":725,"children":726},{"style":91},[727],{"type":19,"value":633},{"type":13,"tag":57,"props":729,"children":730},{"style":64},[731],{"type":19,"value":732}," ipHeader ",{"type":13,"tag":57,"props":734,"children":735},{"style":70},[736],{"type":19,"value":104},{"type":13,"tag":57,"props":738,"children":739},{"style":64},[740],{"type":19,"value":647},{"type":13,"tag":57,"props":742,"children":743},{"style":146},[744],{"type":19,"value":178},{"type":13,"tag":57,"props":746,"children":747},{"style":64},[748],{"type":19,"value":656},{"type":13,"tag":57,"props":750,"children":751},{"style":70},[752],{"type":19,"value":661},{"type":13,"tag":57,"props":754,"children":755},{"style":91},[756],{"type":19,"value":666},{"type":13,"tag":57,"props":758,"children":759},{"style":64},[760],{"type":19,"value":671},{"type":13,"tag":57,"props":762,"children":763},{"class":59,"line":196},[764,768,773,777,781,785,790,795,799,804,809,815,819,823,827],{"type":13,"tag":57,"props":765,"children":766},{"style":91},[767],{"type":19,"value":633},{"type":13,"tag":57,"props":769,"children":770},{"style":64},[771],{"type":19,"value":772}," ip ",{"type":13,"tag":57,"props":774,"children":775},{"style":70},[776],{"type":19,"value":104},{"type":13,"tag":57,"props":778,"children":779},{"style":64},[780],{"type":19,"value":732},{"type":13,"tag":57,"props":782,"children":783},{"style":70},[784],{"type":19,"value":696},{"type":13,"tag":57,"props":786,"children":787},{"style":64},[788],{"type":19,"value":789}," ipHeader.",{"type":13,"tag":57,"props":791,"children":792},{"style":76},[793],{"type":19,"value":794},"split",{"type":13,"tag":57,"props":796,"children":797},{"style":64},[798],{"type":19,"value":143},{"type":13,"tag":57,"props":800,"children":801},{"style":146},[802],{"type":19,"value":803},"','",{"type":13,"tag":57,"props":805,"children":806},{"style":64},[807],{"type":19,"value":808},")[",{"type":13,"tag":57,"props":810,"children":812},{"style":811},"--shiki-default:#AE81FF",[813],{"type":19,"value":814},"0",{"type":13,"tag":57,"props":816,"children":817},{"style":64},[818],{"type":19,"value":656},{"type":13,"tag":57,"props":820,"children":821},{"style":70},[822],{"type":19,"value":711},{"type":13,"tag":57,"props":824,"children":825},{"style":146},[826],{"type":19,"value":716},{"type":13,"tag":57,"props":828,"children":829},{"style":64},[830],{"type":19,"value":671},{"type":13,"tag":57,"props":832,"children":833},{"class":59,"line":205},[834],{"type":13,"tag":57,"props":835,"children":836},{"emptyLinePlaceholder":291},[837],{"type":19,"value":294},{"type":13,"tag":57,"props":839,"children":840},{"class":59,"line":214},[841,846],{"type":13,"tag":57,"props":842,"children":843},{"style":70},[844],{"type":19,"value":845},"  return",{"type":13,"tag":57,"props":847,"children":848},{"style":64},[849],{"type":19,"value":625},{"type":13,"tag":57,"props":851,"children":852},{"class":59,"line":270},[853],{"type":13,"tag":57,"props":854,"children":855},{"style":64},[856],{"type":19,"value":857},"    city,\n",{"type":13,"tag":57,"props":859,"children":860},{"class":59,"line":287},[861],{"type":13,"tag":57,"props":862,"children":863},{"style":64},[864],{"type":19,"value":865},"    ip,\n",{"type":13,"tag":57,"props":867,"children":868},{"class":59,"line":297},[869],{"type":13,"tag":57,"props":870,"children":871},{"style":64},[872],{"type":19,"value":873},"  };\n",{"type":13,"tag":57,"props":875,"children":876},{"class":59,"line":314},[877],{"type":13,"tag":57,"props":878,"children":879},{"style":64},[880],{"type":19,"value":881},"});\n",{"type":13,"tag":883,"props":884,"children":885},"style",{},[886],{"type":19,"value":887},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":5,"searchDepth":87,"depth":87,"links":889},[],"markdown","content:edge-functions.md","content","edge-functions.md","md",1709822570914]